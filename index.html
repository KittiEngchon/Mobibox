<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mobibox App Store</title>
  <link rel="stylesheet" href="assets/style.css" />
  <link rel="icon" href="assets/logo.png" />
</head>
<body>
  <header>
    <img src="assets/logo.png" alt="Mobibox Logo" height="40" />
    <h1>Mobibox Web3 App Store</h1>
    <button id="connectBtn">üîó Connect Wallet</button>
  </header>

  <section id="filters">
    <input type="text" id="search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏≠‡∏õ..." />
    <select id="chainFilter">
      <option value="">üåê ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</option>
    </select>
    <button id="toggleTheme">üåì ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°</button>
  </section>

  <main id="appGrid"></main>

  <footer>
    <p>¬© 2025 Mobibox. Powered by Polygon & Ethereum.</p>
  </footer>

  <!-- Script Zone -->
  <script src="libs/web3.min.js"></script>
  <script src="libs/wallet.js"></script>
  <script src="libs/ui.js"></script>
  <script>
    async function loadChains() {
      const res = await fetch('/data/chains.json');
      const chains = await res.json();
      const select = document.getElementById('chainFilter');
      for (const c of chains) {
        const opt = document.createElement('option');
        opt.value = c.name;
        opt.textContent = c.name;
        select.appendChild(opt);
      }
    }

    async function loadApps() {
      const res = await fetch('/data/apps.json');
      const apps = await res.json();
      const grid = document.getElementById('appGrid');
      grid.innerHTML = '';

      for (const app of apps) {
        const el = document.createElement('div');
        el.className = 'app-card';
        el.innerHTML = `
          <img src="${app.image}" alt="${app.name}" />
          <h2>${app.name}</h2>
          <p>${app.description}</p>
          <div class="badges">${app.badges.map(b => `<span class="badge">${b}</span>`).join(' ')}</div>
          <p>‚≠ê ${app.rating} | üîó ${app.chain}</p>
          <a href="app.html?id=${app.id}" class="btn">‡∏î‡∏π‡πÅ‡∏≠‡∏õ</a>
        `;
        grid.appendChild(el);
      }
    }

    document.getElementById('connectBtn').onclick = connectWallet;
    document.getElementById('toggleTheme').onclick = toggleTheme;

    loadChains();
    loadApps();
  </script>
</body>
</html>

